<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nourish Connection</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <!-- Bulma CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css"
    />

    <!-- style css -->
    <link
      <link
      href="{{ url_for('static', filename='assets/colors/colors.css') }}"
      rel="stylesheet"
    />
    <link
      <link
      href="{{ url_for('static', filename='assets/font-style/font-style.css') }}"
      rel="stylesheet"
    />

    <!-- AJAX -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-1234567890abcdefg..."
      crossorigin="anonymous"
    />

    <!-- Sweetalert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="sweetalert2.min.js"></script>
    <link rel="stylesheet" href="sweetalert2.min.css" />

    <!-- Poppins Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@500;900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <script>
      function sign_out() {
        $.removeCookie("mytoken", { path: "/" });
        Swal.fire({
          title: "Kamu yakin ingin keluar?",
          icon: "question",
          iconHtml: "?",
          confirmButtonText: "Keluar",
          cancelButtonText: "Batal",
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          showCancelButton: true,
          showCloseButton: true,
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "/logout";
          }
        });
        // alert("Signed out!");
      }

      function update_status() {
        let status = $("#status").val();
        $.ajax({
          type: "POST",
          url: "/admin/update_status",
          data: {
            status_give: status,
          },
          success: function (response) {
            console.log(response);
          },
        });
      }
    </script>
  </head>
  <body>
    <!-- Navbar Start -->
    <nav class="navbar" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item">
          <img
            src="{{url_for('static', filename='assets/logo/logo-text-blue.png')}}"
            width="100"
          />
        </a>

        <a
          role="button"
          class="navbar-burger"
          aria-label="menu"
          aria-expanded="false"
          data-target="navbarBasicExample"
        >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-end">
          <div class="navbar-start">
            <a class="navbar-item"> Tentang Nourish </a>
            <a class="navbar-item"> UMKM </a>
            <a class="navbar-item"> Diskusi UMKM </a>
          </div>
          <div class="navbar-items mr-3 ml-2 mt-1">
            <div class="buttons">
              <a class="button is-button-orange" onclick="sign_out()">
                Keluar
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <!-- Navbar Stop -->

    <!-- Table Data Start -->
    <table class="table">
      <thead>
        <tr>
          <th>Username</th>
          <th>Nama Usaha</th>
          <th>Kategori</th>
          <th>Daerah</th>
          <th>Sosial Media</th>
          <th>Status</th>
          <th>Role</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <td>{{ user.username }}</td>
          <td>{{ user.nama_usaha }}</td>
          <td>{{ user.kategori }}</td>
          <td>{{ user.daerah}}</td>
          <td>{{ user.sosial_media }}</td>
          <td>{{ user.status }}</td>
          <td>{{ user.role }}</td>
          <td>
            <form action="/admin/update_status" method="POST">
              <input
                type="hidden"
                name="username"
                value="{{ user.username }}"
              />
              <select name="status" id="status">
                <option value="active">Active</option>
                <option value="nonactive" name="nonactive">Non-active</option>
              </select>
              <button type="submit" class="btn btn-primary">
                Update Status
              </button>
            </form>
          </td>
        </tr>
        <!-- Tambahkan baris lainnya sesuai dengan data yang Anda miliki -->
      </tbody>
      {% endfor %}
    </table>
    <!-- Table Data Stop -->
  </body>
</html>
